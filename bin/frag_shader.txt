#version 430
out vec4 color;
uniform vec4 set_color;
uniform vec3 ambient_light;
layout (binding = 0) uniform sampler2DShadow shadow_tex;

in vec4 shadow_coord;
in float lighting;

void main(void){
    float tempLight = 0.4;
    vec4 coord = vec4(
        (shadow_coord.x + 20)/40, 
        1-((shadow_coord.y + 20)/40), 
        shadow_coord.z, 
        shadow_coord.w
    );
    float shadow = textureProj(shadow_tex, coord);
    
    tempLight += lighting;
    tempLight = min(tempLight, 1.0);
    tempLight *= 0.9;
    
    color = vec4(set_color.x*tempLight, set_color.y*tempLight, set_color.z*tempLight, set_color.w);
    
}